{"ast":null,"code":"'use strict';\n\nvar isGlob = require('is-glob');\n\nvar pathPosixDirname = require('path').posix.dirname;\n\nvar isWin32 = require('os').platform() === 'win32';\nvar slash = '/';\nvar backslash = /\\\\/g;\nvar escaped = /\\\\([!*?|[\\](){}])/g;\n/**\n * @param {string} str\n * @param {Object} opts\n * @param {boolean} [opts.flipBackslashes=true]\n */\n\nmodule.exports = function globParent(str, opts) {\n  var options = Object.assign({\n    flipBackslashes: true\n  }, opts); // flip windows path separators\n\n  if (options.flipBackslashes && isWin32 && str.indexOf(slash) < 0) {\n    str = str.replace(backslash, slash);\n  } // special case for strings ending in enclosure containing path separator\n\n\n  if (isEnclosure(str)) {\n    str += slash;\n  } // preserves full path in case of trailing path separator\n\n\n  str += 'a'; // remove path parts that are globby\n\n  do {\n    str = pathPosixDirname(str);\n  } while (isGlobby(str)); // remove escape chars and return result\n\n\n  return str.replace(escaped, '$1');\n};\n\nfunction isEnclosure(str) {\n  var lastChar = str.slice(-1);\n  var enclosureStart;\n\n  switch (lastChar) {\n    case '}':\n      enclosureStart = '{';\n      break;\n\n    case ']':\n      enclosureStart = '[';\n      break;\n\n    default:\n      return false;\n  }\n\n  var foundIndex = str.indexOf(enclosureStart);\n\n  if (foundIndex < 0) {\n    return false;\n  }\n\n  return str.slice(foundIndex + 1, -1).includes(slash);\n}\n\nfunction isGlobby(str) {\n  if (/\\([^()]+$/.test(str)) {\n    return true;\n  }\n\n  if (str[0] === '{' || str[0] === '[') {\n    return true;\n  }\n\n  if (/[^\\\\][{[]/.test(str)) {\n    return true;\n  }\n\n  return isGlob(str);\n}","map":null,"metadata":{},"sourceType":"script"}